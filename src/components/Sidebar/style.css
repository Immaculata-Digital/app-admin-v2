:root {
  /* Default Theme (matches Nexus OS Dark Blue/Black vibe for sidebar) */
  --sidebar-bg: #0b0f19;
  --sidebar-paper-bg-gradient: linear-gradient(225deg, #1e293b 0%, #020617 100%);
  --sidebar-text-primary: #ffffff;
  --sidebar-text-secondary: rgba(255, 255, 255, 0.7);
  --sidebar-hover-bg: rgba(255, 255, 255, 0.08);

  /* Hardcoded Highlight Color #3b82f6 */
  --brand-primary: #3b82f6;
  --sidebar-active-bg: var(--brand-primary);
  --sidebar-active-text: #ffffff;
  --sidebar-border: rgba(255, 255, 255, 0.05);
}

/* Light Mode Overrides for Sidebar? 
   User asked for specific design in the image which is dark. 
   Usually Sidebars in these admin templates stay dark even in light mode, OR they invert. 
   Given "Nexus OS" image is dark, we default to dark styles. 
   If light mode is strictly required to be white, uncomment below.
*/
/*
html:not(.theme-dark) {
  --sidebar-bg: #ffffff;
  --sidebar-paper-bg: #ffffff;
  --sidebar-text-primary: #1e293b;
  --sidebar-text-secondary: #64748b;
  --sidebar-hover-bg: #f1f5f9;
  --sidebar-active-bg: var(--brand-primary, #2563eb);
  --sidebar-active-text: #ffffff;
  --sidebar-border: #e2e8f0;
}
*/

/* Sidebar Container */
.sidebar-container {
  height: 100vh;
  flex-shrink: 0;
  width: 280px;
  /* Expanded Width */
  transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  background-color: var(--sidebar-bg);
  border-right: 1px solid var(--sidebar-border);
}

.sidebar-container--closed {
  width: 80px;
  /* Collapsed Width */
}

/* Paper / Drawer styling */
/* Paper / Drawer styling */
.sidebar-paper {
  /* Login Gradient: Top Right (#3b82f6) -> Bottom Left (Darker) */
  background: linear-gradient(225deg,
      var(--brand-primary, #3b82f6) 0%,
      color-mix(in srgb, var(--brand-primary, #3b82f6), black 60%) 100%) !important;
  color: var(--sidebar-text-primary) !important;
  border-right: 1px solid var(--sidebar-border) !important;
  width: 280px;
  overflow-x: hidden;
  transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  /* Ensure Sharp Edges for Sidebar Paper */
  border-radius: 0 !important;
}

.sidebar-paper--closed {
  width: 80px;
  padding: 1.5rem 0.5rem;
}

/* ----------------------------------
   Header 
---------------------------------- */
.sidebar-header {
  margin-bottom: 2rem;
  min-height: 48px;
  height: auto;
  /* Allow growth for vertical stack */
  display: flex;
  align-items: center;
  justify-content: center;
  /* Center content */
}

.brand-icon-container {
  width: 40px;
  height: 40px;
  border-radius: 12px;
  background: linear-gradient(135deg, var(--brand-primary, #2563eb), rgba(37, 99, 235, 0.5));
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

/* ----------------------------------
   Navigation 
---------------------------------- */
.sidebar-content {
  flex: 1;
  overflow-y: auto;
  margin-right: -10px;
  /* Push scrollbar out or hide */
  padding-right: 10px;
}

.sidebar-section {
  margin-bottom: 1.5rem;
}

.sidebar-section__title {
  display: block;
  margin-bottom: 0.75rem;
  padding-left: 0.75rem;
  font-weight: 600;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  color: var(--sidebar-text-secondary) !important;
  font-size: 0.75rem !important;
}

.sidebar-link {
  border-radius: 8px !important;
  /* Slightly smaller radius */
  margin-bottom: 4px;
  padding: 8px 12px !important;
  /* Reduced padding */
  transition: all 0.2s ease;
  min-height: 40px;
  /* Reduced height */
}

/* ... existing hover ... */
.sidebar-link:hover {
  background-color: var(--sidebar-hover-bg) !important;
}

/* Active State - White Glass Style for Blue Background */
.sidebar-link.active {
  background-color: rgba(255, 255, 255, 0.2);
  /* Lighter glass effect */
  background: linear-gradient(90deg, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0.15) 100%);
  color: #ffffff;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.sidebar-link.active .MuiListItemIcon-root,
.sidebar-link.active .MuiTypography-root {
  color: #ffffff;
  font-weight: 700;
  opacity: 1;
}

/* Global Sidebar Text/Icon Override */
.sidebar-link .MuiListItemIcon-root,
.sidebar-link .MuiTypography-root,
.sidebar-link .MuiSvgIcon-root {
  color: #ffffff !important;
  opacity: 1 !important;
}

/* Ensure no default min-width on icons */
.sidebar-link .MuiListItemIcon-root {
  min-width: 0 !important;
  /* Fix lateral spacing issue */
  margin-right: 12px;
  /* Add explicit gap only when open/needed */
}

/* Collapsed Icon Centering */
.sidebar-paper--closed .sidebar-link {
  justify-content: center;
  padding: 8px 0;
}

.sidebar-paper--closed .MuiListItemIcon-root {
  margin-right: 0 !important;
  /* No margin when closed */
}

/* ----------------------------------
   Footer (User Profile)
---------------------------------- */
.sidebar-footer {
  margin-top: auto;
  padding-top: 1rem;
}

.sidebar-footer__divider {
  background-color: var(--sidebar-border) !important;
  margin: 1rem 0 !important;
}

.user-profile-card {
  display: flex;
  align-items: center;
  padding: 10px;
  border-radius: 12px;
  cursor: pointer;
  transition: background-color 0.2s ease;
  background-color: rgba(255, 255, 255, 0.03);
  border: 1px solid transparent;
}

.user-profile-card:hover {
  background-color: var(--sidebar-hover-bg);
  border-color: var(--sidebar-border);
}

.sidebar-paper--closed .user-profile-card {
  justify-content: center;
  padding: 10px 0;
  background: transparent;
}

/* Scrollbar styling */
.sidebar-content::-webkit-scrollbar {
  width: 4px;
}

.sidebar-content::-webkit-scrollbar-track {
  background: transparent;
}

.sidebar-content::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
}

/* Mobile */
@media (max-width: 900px) {
  .sidebar-paper--mobile {
    width: 280px;
    background-color: var(--sidebar-bg) !important;
  }
}